# kinmu

## 概要

看護職員の勤務表を自動生成するツールです。
設定ファイルに条件を入力し、プログラムを実行することで条件に合った勤務表を生成します。
アルゴリズムは焼きなまし法(Simulated Annealing法)を採用しています。

### このツールの強み

- 無料

   無償提供しています。

- ローカルで実行可能

   個人情報をサーバーに送る必要はありません。

- オーブンソース

   気に入らない部分や改良したい点があれば、ソースコードを自由に編集して利用できます。

- テキストベース

   複雑な操作を省き、簡潔かつ効率的にツールを利用できます。

- 非線形な条件に対応可能

   あいまいな条件を要求できます。

- 妥協案の提示が可能

   全ての条件を満たせなくても、解が出力されます。

### このツールの弱み

- 実行速度

   ローカルで実行するため、実行するマシンの性能が低い場合は実行速度が遅くなってしまいます。
   また、定式化や最適化を行っていないため、実行速度は企業などが提供するソルバーに劣ります。

- 難易度

   ターミナルを使用する必要があったり、TOML形式の設定ファイルを書く必要があったりと難易度が高いかもしれません。
   特に、プログラミングに精通している人でないと難しいかもしれません。

### 問題の想定規模

付属の`example/real_case`にある例（職員12名、30日分のシフト）程度を想定しています。
職員数と日数に対して、計算時間はほぼ線形に増加します。
この例では40万ステップの焼きなましで作者の環境における実行時間は約30秒です。

本ツールはローカル環境で実行することを前提としており、実行時間はお使いのコンピュータの性能に依存します。

### 作者の環境

- OS: Windows
- CPU: Intel Core i7-8700
- メモリ: 16 GB

一昔前のコンピュータです。
最近のものであればさらに速く計算できるでしょう。

WindowsおよびUbuntuでの動作を確認済みです。
本ツールはRustで実装しているため、ビルドすればmacOSでも動作する可能性がありますが、現時点では未確認です。

### ライセンス

MITライセンスをリポジトリ全体に適用しています。
このため商用利用、ソースコードの改変、二次配布等を許可しています。

### リポジトリ

https://github.com/unsharot/kinmu_rs

## 実行方法と出力例

`kinmu.exe`と付属の`example`をダウンロードして、それらを同一のフォルダに格納してください。
ターミナルでフォルダに移動し、下のようにコマンドを実行してください。
付属の例である`example/simple_case/main_config.toml`が読み込まれ、計算結果が出力されます。

```sh
./kinmu.exe
```

### 出力

![](example/simple_case/output_stdout.png)

html形式での出力を行う機能もあります。

```sh
./kinmu.exe --html -o output.html
```

### 出力

![](example/real_case/output_html.png)

詳細は[ドキュメント](docs/index.md)を参照してください。

## 設定方法

設定はTOML形式で書きます。
設定ファイルは粒度順に`main_config`, `schedule_config`, `annealing_config`に分かれています。

詳細は[ドキュメント](docs/index.md)と付属の`example`フォルダを参照してください。

## お問い合わせ

質問、バグの報告、機能のご要望、ご不便に感じている点など、どんなことでもお気軽にお知らせください。
以下の方法でお問い合わせいただけます。

### GitHub Issue

不具合の報告や機能追加のご要望は、Issueを作成していただくとスムーズに対応できます。
質問などもこちらでしていただくと、他の利用者とも情報を共有できるためおすすめです。

### お問い合わせフォーム(Google form)

GitHubアカウントをお持ちでない方や、匿名・非公開でお問い合わせを希望される方は、以下のフォームをご利用ください。

https://forms.gle/S8quep5dtCRjfB8G6

## 開発への貢献について

開発へのご協力は大歓迎です！
Pull Request(PR)をお送りいただければ、こちらでレビューさせていただきます。
また、コードに関して気になる点がありましたら、Issueを立てて共有していただけると嬉しいです。
皆さまのご意見や知見は非常に参考になります。
